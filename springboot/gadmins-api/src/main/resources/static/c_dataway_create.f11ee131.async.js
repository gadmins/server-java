(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{ulAy:function(e,t,n){"use strict";n.r(t);n("2qtc");var r=n("kLXV"),a=n("wx14"),i=n("o0o1"),u=n.n(i),c=n("VTBJ"),o=n("HaE+"),l=n("ODXe"),s=n("q1tI"),p=n.n(s),f=n("FVvW"),d=n("sy1d"),b=n("kS/g"),v={labelCol:{span:5},wrapperCol:{span:15}},y=Object(f["createFormActions"])();t["default"]=function(e){var t=e.modalVisible,n=e.onSubmit,i=e.onCancel,m=e.initVals,x=Object(s["useState"])([]),O=Object(l["a"])(x,2),g=O[0],j=O[1],w=Object(s["useState"])(""),h=Object(l["a"])(w,2),C=h[0],k=h[1];function P(e){var t=g.findIndex((function(t){return t.type===e}));if(t>-1){var n=g[t].urlPrefix,r=n.endsWith("/")?n:"".concat(n,"/");return k(r),r}return k(""),""}var q=m?{groupType:m.groupType,desc:m.desc}:{},T={type:"object",properties:{groupType:{type:"string",title:"\u5206\u7ec4\u7c7b\u578b",required:!0,enum:g.map((function(e){return{value:e.type,label:e.label}})),"x-component-props":{allowClear:!0,onChange:function(e){P(e)}}},desc:{type:"string",title:"\u5206\u7ec4\u63cf\u8ff0",required:!0},urlPrefix:{type:"string",title:"URL\u524d\u7f00",required:!0,"x-component-props":{addonBefore:C}},hasMenu:{type:"boolean",title:"\u83dc\u5355","x-linkages":[{type:"value:visible",target:"menuCode",condition:"{{$value}}"},{type:"value:visible",target:"menuParentCode",condition:"{{$value}}"},{type:"value:visible",target:"menuTitle",condition:"{{$value}}"}]},menuCode:{type:"string",title:"\u83dc\u5355\u7f16\u7801",required:!0},menuParentCode:{type:"string",title:"\u83dc\u5355\u7236\u7ea7\u7f16\u7801",required:!0},menuTitle:{type:"string",title:"\u83dc\u5355\u6807\u9898",required:!0}}};Object(s["useEffect"])((function(){return Object(b["c"])().then((function(e){d["a"].isOk(e)&&j(e.data)})),function(){Object(d["b"])()}}),[]),Object(s["useEffect"])((function(){if(m&&m.groupType&&m.urlPrefix){var e=P(m.groupType);e&&""!==e&&y.setFieldValue("urlPrefix",m.urlPrefix.replace(e,""))}return function(){}}),[g]);var V=function(){var e=Object(o["a"])(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validate();case 3:return e.next=5,y.submit(function(){var e=Object(o["a"])(u.a.mark((function e(t){var r;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n(Object(c["a"])(Object(c["a"])({},t),{},{urlPrefix:C+t.urlPrefix}));case 2:r=e.sent,r&&y.reset();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(r["a"],{maskClosable:!1,destroyOnClose:!0,visible:t,title:m?"\u590d\u5236\u5206\u7ec4":"\u521b\u5efa\u5206\u7ec4",onOk:V,onCancel:function(){y.reset(),i()}},p.a.createElement(f["SchemaForm"],Object(a["a"])({initialValues:q,schema:T,actions:y},v)))}}}]);